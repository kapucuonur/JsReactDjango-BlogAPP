{"ast":null,"code":"var _jsxFileName = \"/Users/onurkapucu/Downloads/Django-And-React-JS-Blog-main/frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport ArticleList from './components/ArticleList';\nimport { useState, useEffect } from 'react';\nimport NavBar from './components/NavBar';\nimport Form from './components/Form';\nimport { useNavigate } from 'react-router-dom';\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [articles, setArticles] = useState([]);\n  const [editArticle, setEditArticle] = useState('');\n  const [token, setToken] = useState(localStorage.getItem('mytoken') || ''); // Get token from local storage\n\n  let navigate = useNavigate(); // Function to get the base URL\n\n  const getBaseURL = () => {\n    return import.meta.env.VITE_API_URL || 'http://localhost:8000';\n  }; // Fetch articles\n\n\n  useEffect(() => {\n    fetch(`${getBaseURL()}/api/articles/`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${token}` // Use the token from local storage\n\n      }\n    }).then(resp => resp.json()).then(resp => setArticles(resp)).catch(error => console.log(error));\n  }, [token]); // Edit button handler\n\n  const editBtn = article => {\n    setEditArticle(article);\n  }; // Update article\n\n\n  const updatedInformation = article => {\n    const new_article = articles.map(myarticle => {\n      if (myarticle.id === article.id) {\n        return article;\n      } else {\n        return myarticle;\n      }\n    });\n    setArticles(new_article);\n  }; // Create new article form\n\n\n  const articleForm = () => {\n    setEditArticle({\n      title: '',\n      description: ''\n    });\n  }; // Insert new article\n\n\n  const insertedInformation = article => {\n    const new_articles = [...articles, article];\n    setArticles(new_articles);\n  }; // Delete article\n\n\n  const deleteBtn = article => {\n    const new_article = articles.filter(myarticle => {\n      if (myarticle.id === article.id) {\n        return false;\n      }\n\n      return true;\n    });\n    setArticles(new_article);\n  }; // Check token and redirect\n\n\n  useEffect(() => {\n    if (!token) {\n      navigate('/'); // Redirect to login if no token\n    } else {\n      navigate('/articles'); // Redirect to articles if token exists\n    }\n  }, [token, navigate]); // Logout handler\n\n  const logoutBtn = () => {\n    localStorage.removeItem('mytoken'); // Remove token from local storage\n\n    setToken(''); // Clear token state\n\n    navigate('/'); // Redirect to login\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App bg-gray-100 min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      logoutBtn: logoutBtn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-300\",\n          onClick: articleForm,\n          children: \"Create Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ArticleList, {\n        articles: articles,\n        editBtn: editBtn,\n        deleteBtn: deleteBtn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        article: editArticle,\n        updatedInformation: updatedInformation,\n        insertedInformation: insertedInformation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"wWeaD7mNbUgprgG9tuYLwo76gto=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["ArticleList","useState","useEffect","NavBar","Form","useNavigate","React","App","articles","setArticles","editArticle","setEditArticle","token","setToken","localStorage","getItem","navigate","getBaseURL","import","meta","env","VITE_API_URL","fetch","method","headers","then","resp","json","catch","error","console","log","editBtn","article","updatedInformation","new_article","map","myarticle","id","articleForm","title","description","insertedInformation","new_articles","deleteBtn","filter","logoutBtn","removeItem"],"sources":["/Users/onurkapucu/Downloads/Django-And-React-JS-Blog-main/frontend/src/App.js"],"sourcesContent":["import './App.css';\nimport ArticleList from './components/ArticleList';\nimport { useState, useEffect } from 'react';\nimport NavBar from './components/NavBar';\nimport Form from './components/Form';\nimport { useNavigate } from 'react-router-dom';\nimport React from 'react';\n\nfunction App() {\n  const [articles, setArticles] = useState([]);\n  const [editArticle, setEditArticle] = useState('');\n  const [token, setToken] = useState(localStorage.getItem('mytoken') || ''); // Get token from local storage\n  let navigate = useNavigate();\n\n  // Function to get the base URL\n  const getBaseURL = () => {\n    return import.meta.env.VITE_API_URL || 'http://localhost:8000';\n  };\n\n  // Fetch articles\n  useEffect(() => {\n    fetch(`${getBaseURL()}/api/articles/`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${token}` // Use the token from local storage\n      }\n    })\n      .then(resp => resp.json())\n      .then(resp => setArticles(resp))\n      .catch(error => console.log(error));\n  }, [token]);\n\n  // Edit button handler\n  const editBtn = (article) => {\n    setEditArticle(article);\n  };\n\n  // Update article\n  const updatedInformation = (article) => {\n    const new_article = articles.map(myarticle => {\n      if (myarticle.id === article.id) {\n        return article;\n      } else {\n        return myarticle;\n      }\n    });\n    setArticles(new_article);\n  };\n\n  // Create new article form\n  const articleForm = () => {\n    setEditArticle({ title: '', description: '' });\n  };\n\n  // Insert new article\n  const insertedInformation = (article) => {\n    const new_articles = [...articles, article];\n    setArticles(new_articles);\n  };\n\n  // Delete article\n  const deleteBtn = (article) => {\n    const new_article = articles.filter(myarticle => {\n      if (myarticle.id === article.id) {\n        return false;\n      }\n      return true;\n    });\n    setArticles(new_article);\n  };\n\n  // Check token and redirect\n  useEffect(() => {\n    if (!token) {\n      navigate('/'); // Redirect to login if no token\n    } else {\n      navigate('/articles'); // Redirect to articles if token exists\n    }\n  }, [token, navigate]);\n\n  // Logout handler\n  const logoutBtn = () => {\n    localStorage.removeItem('mytoken'); // Remove token from local storage\n    setToken(''); // Clear token state\n    navigate('/'); // Redirect to login\n  };\n\n  return (\n    <div className=\"App bg-gray-100 min-h-screen\">\n      <NavBar logoutBtn={logoutBtn} />\n      <br />\n      <div className=\"max-w-7xl mx-auto p-4\">\n        <div className=\"flex justify-end\">\n          <button\n            className=\"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-300\"\n            onClick={articleForm}\n          >\n            Create Post\n          </button>\n        </div>\n        <ArticleList articles={articles} editBtn={editBtn} deleteBtn={deleteBtn} />\n        <Form\n          article={editArticle}\n          updatedInformation={updatedInformation}\n          insertedInformation={insertedInformation}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}